# æ¦‚è¿°

Dart æ˜¯ä¸€ä¸ªæ˜“ç”¨ã€å¯ç§»æ¤ä¸”é«˜æ•ˆçš„è¯­è¨€ï¼Œé€‚ç”¨äºåœ¨å…¨å¹³å°å¼€å‘é«˜è´¨é‡çš„åº”ç”¨ç¨‹åºã€‚

1. Official websiteï¼š https://dart.dev/
2. playgroundï¼šhttps://dartpad.cn
3. packagesï¼šhttps://pub.dev
4. documentsï¼šhttps://dart.cn/language/

å­¦ä¹ å»ºè®®ï¼š

æ‰“å¼€  [dart playground >>](https://dartpad.cn) å¹¶ç»“åˆ [dart æŒ‡å— >>](https://dart.cn/language/) å¼€å¯æ‚¨çš„ dart ä¹‹æ—…ã€‚

å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ vscode ä¸­ç¼–å†™ dart

1. æ‰“å¼€ v scode
2. <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>X</kbd>ï¼Œæœç´¢ `Flutter` / `Dart` æ’ä»¶å¹¶å®‰è£…

# Hello World

æ¯ä¸ªåº”ç”¨éƒ½æœ‰ä¸€ä¸ªé¡¶å±‚çš„ `main()` å‡½æ•°æ¥ä½œä¸ºè¿è¡Œå…¥å£ã€‚æ²¡æœ‰æŒ‡å®šè¿”å›ç±»å‹çš„æ–¹æ³•çš„è¿”å›ç±»å‹ä¼šæ¨å¯¼ä¸º `void`ã€‚ä½ å¯ä»¥ä½¿ç”¨é¡¶å±‚å‡½æ•° `print()` æ¥å°†ä¸€æ®µæ–‡æœ¬è¾“å‡ºæ˜¾ç¤ºåˆ°æ§åˆ¶å°ï¼š

```dart
void main() {
  print('Hello, World!');
}
```

# åŸºç¡€è¡¨è¾¾å¼

## æ³¨é‡Š

- å•è¡Œæ³¨é‡Šï¼š`// æˆ‘æ˜¯å•è¡Œæ³¨é‡Š`
- å¤šè¡Œæ³¨é‡Šï¼š`/* æˆ‘æ˜¯å¤šè¡Œæ³¨é‡Š */`
- æ–‡æ¡£æ³¨é‡Šï¼š`/// æˆ‘æ˜¯æ–‡æ¡£æ³¨é‡Š` ï¼ˆTipsï¼šæ–‡æ¡£æ³¨é‡Šæ”¯æŒ markdown è¯­æ³•ï¼‰

## å˜é‡

@See https://dart.dev/language/variables

å®šä¹‰å˜é‡

```dart
// æ¨¡ç³Šç±»å‹ï¼Œè‡ªåŠ¨æ¨æ–­
var     name = 'Leo';
Object  name = 'Leo';
dynamic name = 'Leo';
// æ˜ç¡®æŒ‡å®šç±»å‹
String  name = 'Leo';
```

> **æç¤º**ï¼šé€šå¸¸å»ºè®®ä½¿ç”¨ `var` å…³é”®å­—æ¥å®šä¹‰å˜é‡ã€‚

- å˜é‡åå¤§å°å†™æ•æ„Ÿ
- å˜é‡é»˜è®¤å€¼æ˜¯ `null`
- å˜é‡çš„å€¼ä¸ä¼šè¿›è¡Œéšå¼è½¬æ¢ï¼ˆ`null` ä¸ä¼šè‡ªåŠ¨è½¬æˆ `false`ï¼‰

## ç©ºå®‰å…¨

Dart è¯­è¨€è¦æ±‚ä»¥å¥å…¨çš„ç©ºå®‰å…¨æ–¹å¼ç¼–å†™ä»£ç ã€‚ç©ºå®‰å…¨èƒ½å¤Ÿé˜²æ­¢æ„å¤–è®¿é—® `null` çš„å˜é‡è€Œå¯¼è‡´çš„é”™è¯¯ã€‚

è¦è®©ä¸€ä¸ªå˜é‡å¯ä»¥ä¸ºç©ºï¼Œä½ å¯ä»¥åœ¨ç±»å‹å£°æ˜çš„æœ«å°¾æ·»åŠ  `?` ã€‚

```dart
String? name  // Nullable type. Can be `null` or string.
String name   // Non-nullable type. Cannot be `null` but can be string.
```

å¿…é¡»åœ¨ä½¿ç”¨å˜é‡ä¹‹å‰å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚

## å»¶è¿Ÿåˆå§‹åŒ–å˜é‡

`late` ä¿®é¥°ç¬¦æœ‰ä¸¤ç§ç”¨æ³•ï¼š

- å£°æ˜ä¸€ä¸ªéç©ºå˜é‡ï¼Œä½†ä¸åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ã€‚
- å»¶è¿Ÿåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ã€‚

å¦‚æœä½ ç¡®å®šå˜é‡åœ¨ä½¿ç”¨ä¹‹å‰å·²è®¾ç½®ï¼Œä½† Dart æ¨æ–­é”™è¯¯çš„è¯ï¼Œå¯ä»¥å°†å˜é‡æ ‡è®°ä¸º `late` æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```dart
late String description;

void main() {
  description = 'Feijoada!';
  print(description);
}
```

å½“ä¸€ä¸ª `late` ä¿®é¥°çš„å˜é‡åœ¨å£°æ˜æ—¶å°±æŒ‡å®šäº†åˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆå†…å®¹ä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨å˜é‡æ—¶è¿è¡Œåˆå§‹åŒ–ã€‚è¿™ç§å»¶è¿Ÿåˆå§‹åŒ–åœ¨ä»¥ä¸‹æƒ…å†µå¾ˆæ–¹ä¾¿ï¼š

- Dart æ¨æ–­ï¼‰å¯èƒ½ä¸éœ€è¦è¯¥å˜é‡ï¼Œå¹¶ä¸”åˆå§‹åŒ–å®ƒçš„å¼€é”€å¾ˆé«˜ã€‚
- ä½ æ­£åœ¨åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå®ƒçš„åˆå§‹åŒ–æ–¹æ³•éœ€è¦è°ƒç”¨ `this`ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ `temperature` å˜é‡ä»æœªè¢«ä½¿ç”¨ï¼Œåˆ™ `readThermometer()` è¿™ä¸ªå¼€é”€è¾ƒå¤§çš„å‡½æ•°ä¹Ÿæ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ï¼š

```dart
// This is the program's only call to readThermometer().
late String temperature = readThermometer(); // Lazily initialized.
```

## ç»ˆå€¼ (final) å’Œå¸¸é‡ (const)

å¦‚æœä½ ä¸æ‰“ç®—æ›´æ”¹ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ `final` æˆ– `const` ä¿®é¥°å®ƒï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `var` æˆ–ä½œä¸ºç±»å‹é™„åŠ ã€‚ä¸€ä¸ª final å˜é‡åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼Œconst å˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ï¼ˆconst å¸¸é‡éšå¼åŒ…å«äº† finalã€‚ï¼‰

> **æ³¨æ„**ï¼šå®šä¹‰å¯¹è±¡æ—¶ï¼Œå®ä¾‹å˜é‡å¯ä»¥æ˜¯ `final` ä½†ä¸èƒ½æ˜¯ `const`ã€‚

ä¸‹é¢æ˜¯åˆ›å»ºå’Œè®¾ç½® `final` å˜é‡çš„ç¤ºä¾‹ï¼š

```dart
final name = 'Bob'; // Without a type annotation
final String nickname = 'Bobby';
```

ä½ ä¸èƒ½ä¿®æ”¹ `final` å˜é‡çš„å€¼ï¼š

```dart
name = 'Alice'; // Error: a final variable can only be set once.
```

## æ“ä½œç¬¦

@See https://dart.dev/language/operators

# æ•°æ®ç±»å‹

@See https://dart.dev/language/built-in-types

- åŸºæœ¬ç±»å‹ï¼š`int`ã€`double`ã€`String`ã€`bool`ã€`Symbol`ã€`Null`
- é›†åˆç±»å‹ï¼š`List`ã€`Set`ã€`Map`
- å…ƒç»„ç±»å‹ï¼š`Records` - `(value1, value2)`

## Numbers

@See https://dart.dev/language/built-in-types#numbers

- `int`ï¼šæ•´å‹ï¼Œ10ï¼Œ+10ï¼Œ-10
- `double`ï¼šæµ®ç‚¹å‹ï¼Œ3.14
- `num`ï¼šæ•°å€¼ï¼Œæ˜¯ `int` å’Œ `double` çš„çˆ¶ç±»å‹

### æ•°å€¼ç±»å‹è½¬æ¢

```dart
print(3.14.toInt());
print(10.toDouble());
print(10.toString());

print(num.parse('10'));
print(num.parse('3.14'));
print(num.tryParse('3.14'));
print(num.tryParse('3.14ğŸŒŸ')); // å®‰å…¨è½¬æ¢ï¼Œå¤±è´¥è¿”å› null

print(int.parse('10'));
print(double.parse('3.14'));
```

### åŸºæœ¬è¿ç®—

```dart
3 + 2;     // 5
3 - 2;     // 1
3 * 2;     // 6
3 / 2;     // 1.5
7 ~/ 3;    // 2 æ•´é™¤
7 % 3;     // 1 å–ä½™
```

å¹‚è¿ç®—ï¼š

```dart
import 'dart:math';
pow(2, 3); // 8
```

### å–æ•´ä¸èˆå…¥

```dart
print(3.14.floor());
print(3.14.ceil());
print(3.14.round());
print(3.14.truncate());

print(3.14.floorToDouble());
print(3.14.ceilToDouble());
print(3.14.roundToDouble());
print(3.14.truncateToDouble());
```

### æ¯”è¾ƒä¸èŒƒå›´

```dart
5 < 10;           // true
5 >= 5;           // true
5.compareTo(10);  // -1 (å°äº)
5.compareTo(5);   // 0  (ç›¸ç­‰)
5.compareTo(1);   // 1  (å¤§äº)
8.clamp(0, 5);    // 5 é™åˆ¶åŒºé—´
```

### ç»å¯¹å€¼ä¸ç¬¦å·

```dart
(-8).abs(); // 8
8.sign;     // 1
(-8).sign;  // -1
0.sign;     // 0
```

### å–ä½™ä¸æ¨¡

```dart
10 % 3;             // 1
10.remainder(3);    // 1 (ä¸ % ç±»ä¼¼)
(-10).remainder(3); // -1 (ç¬¦åˆ IEEE è§„åˆ™)
```

### æµ®ç‚¹æ•°æ“ä½œ

```dart
3.14159.toStringAsFixed(2);     // "3.14"  ä¿ç•™2ä½å°æ•°
3.14159.toStringAsPrecision(3); // "3.14"  ä¿ç•™3ä½æœ‰æ•ˆæ•°å­—
double.nan.isNaN;               // true  æ˜¯å¦ä¸º NaN
double.infinity.isInfinite;     // true  æ˜¯å¦ä¸ºæ­£æ— ç©·æˆ–è´Ÿæ— ç©·
3.14.isFinite;                  // true  æ˜¯å¦æ˜¯æœ‰é™æ•°å€¼
(-1.23).isNegative;             // true  æ˜¯å¦ä¸ºè´Ÿæ•°
```

## éšæœºæ•°

```dart
import 'dart:math';

final random = Random();

random.nextInt(10);    // 0~9 éšæœºæ•´æ•°
random.nextDouble();   // 0.0~1.0 ä¹‹é—´éšæœºæ•°
random.nextBool();     // true / false
```

### å…¶ä»–å®ç”¨å±æ€§

```dart
5.isEven;       // true
5.isOdd;        // false
5.hashCode;     // å“ˆå¸Œå€¼
5.runtimeType;  // int
3.14.runtimeType; // double
```



## Strings

å®šä¹‰å­—ç¬¦ä¸²ï¼š

```dart
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s3 = 'It\'s easy to escape the string delimiter.';
var s4 = "It's even easier to use the other delimiter.";
```

æ¨¡æ¿è¯­æ³•ï¼š

```dart
var country = 'china';
var age = 30;
print('I\'m  from ${country.toUpperCase()}!, and $age years old.');
```

å¸¸ç”¨å±æ€§ï¼š

- `length`ï¼šè·å–å­—ç¬¦ä¸²çš„é•¿åº¦
- `isEmpty` / `isNotEmpty`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º

å¸¸ç”¨æ–¹æ³•ï¼š

- `+`ï¼šæ‹¼æ¥
- `contains()`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŸä¸ªå­ä¸²
- `substring()`ï¼šæˆªå–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†
- `toUpperCase()` / `toLowerCase()`ï¼šè½¬æ¢ä¸ºå¤§å†™æˆ–å°å†™å­—æ¯
- `replaceAll()`ï¼šæ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰åŒ¹é…éƒ¨åˆ†
- `split()`ï¼šæ ¹æ®æŒ‡å®šçš„åˆ†éš”ç¬¦æ‹†åˆ†å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨
- `trim()` / `trimLeft()` / `trimRight()`ï¼šç§»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯ã€å·¦ä¾§æˆ–å³ä¾§çš„ç©ºç™½å­—ç¬¦
- ` startsWith()` / `endsWith()`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸä¸ªå­ä¸²å¼€å§‹æˆ–ç»“æŸ
- `indexOf(`) / `lastIndexOf()`ï¼šè¿”å›å­ä¸²åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½®ï¼Œæˆ–æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®

## Records

@See https://dart.cn/language/records/

è®°å½•ï¼Œç±»ä¼¼äºå…ƒç»„

```dart
// -- å®šä¹‰
var infos = ('æé¸¿è€€', '15888888888', 30);

// -- è®¿é—®
print('''
å§“åï¼š${infos.$1}
ç”µè¯ï¼š${infos.$2}
å¹´é¾„ï¼š${infos.$3}
''');

// -- å‘½å
var dog = (name: 'å¤§é»„', color: 'é»„è‰²');
print('${dog.name} - ${dog.color}');

// -- è§£æ„
var (min, max) = (60, 90);
print('min = $min, max = $max');
```

## Collections

@See https://dart.cn/language/collections/

### List

å®šä¹‰æ•°ç»„ï¼š

```dart
var nums = [1, 2, 3, 4, 5];
```

å¸¸ç”¨å±æ€§ï¼š

- `length`ï¼šè·å–åˆ—è¡¨çš„é•¿åº¦ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰
- `isEmpty`ï¼šæ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©º
- `isNotEmpty`ï¼šæ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ä¸ºç©º
- `first`ï¼šè·å–åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœåˆ—è¡¨ä¸ºç©ºï¼Œä¼šæŠ›å‡ºå¼‚å¸¸
- `last`ï¼šè·å–åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœåˆ—è¡¨ä¸ºç©ºï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
- `reversed`ï¼šè¿”å›ä¸€ä¸ªåè½¬é¡ºåºçš„åˆ—è¡¨è¿­ä»£å™¨

å¸¸ç”¨æ–¹æ³•ï¼š

- `add()` / `addAll()`ï¼šå‘åˆ—è¡¨æ·»åŠ  ä¸€ä¸ª/å¤šä¸ª å…ƒç´ 
- `insert()` / `insertAll()`ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥ ä¸€ä¸ª/å¤šä¸ª å…ƒç´ 
- `remove()`ï¼šç§»é™¤åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ 
- `removeAt()`ï¼šç§»é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
- `removeLast()`ï¼šç§»é™¤åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ 
- `clear()`ï¼šæ¸…ç©ºåˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ 
- `indexOf()`ï¼šè¿”å›å…ƒç´ çš„ç´¢å¼•ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å…ƒç´ ï¼Œè¿”å› -1
- `sort()`ï¼šå¯¹åˆ—è¡¨è¿›è¡Œæ’åºã€‚å¯ä»¥ä¼ å…¥è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°
- `contains()`ï¼šæ£€æŸ¥åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ 
- `forEach()`ï¼šå¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ
- `map()`ï¼šå¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè½¬æ¢ï¼Œè¿”å›æ–°çš„ Iterable
- `where()`ï¼šè¿‡æ»¤åˆ—è¡¨ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ 
- `join()`ï¼šå°†åˆ—è¡¨ä¸­çš„å…ƒç´ ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²

### Sets

å®šä¹‰ Setï¼š

```dart
var names1 = <String>{};
Set<String> names2 = {};
Set<int> numbers = {1, 2, 3};
```

å¸¸ç”¨å±æ€§ï¼š

- `length`ï¼šè¿”å›é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°
- `isEmpty`ï¼šæ£€æŸ¥é›†åˆæ˜¯å¦ä¸ºç©º
- `isNotEmpty`ï¼šæ£€æŸ¥é›†åˆæ˜¯å¦ä¸ä¸ºç©º

å¸¸ç”¨æ–¹æ³•ï¼š

- `add()`ï¼šå‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœè¯¥å…ƒç´ å·²å­˜åœ¨ï¼Œé›†åˆä¿æŒä¸å˜
- `addAll()`ï¼šå‘é›†åˆä¸­æ·»åŠ å¤šä¸ªå…ƒç´ ã€‚å¦‚æœæŸä¸ªå…ƒç´ å·²å­˜åœ¨ï¼Œé›†åˆä¿æŒä¸å˜ã€‚
- `remove()`ï¼šç§»é™¤é›†åˆä¸­çš„æŒ‡å®šå…ƒç´ ã€‚å¦‚æœè¯¥å…ƒç´ ä¸å­˜åœ¨ï¼Œé›†åˆä¿æŒä¸å˜ã€‚
- `contains()`ï¼šæ£€æŸ¥é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ 
- `clear()`ï¼šæ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ 
- `intersection()`ï¼šè¿”å›å½“å‰é›†åˆä¸å¦ä¸€ä¸ªé›†åˆçš„äº¤é›†
- `union()`ï¼šè¿”å›å½“å‰é›†åˆä¸å¦ä¸€ä¸ªé›†åˆçš„å¹¶é›†
- `difference()`ï¼šè¿”å›å½“å‰é›†åˆä¸å¦ä¸€ä¸ªé›†åˆçš„å·®é›†
- `forEach()`ï¼šå¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šæ“ä½œ
- `map()`ï¼šå¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè½¬æ¢ï¼Œè¿”å›æ–°çš„ Iterable

### Maps

å®šä¹‰ Mapï¼š

```dart
var tonics = {
  'bpm': 60,
  'keySignature': 'C-major',
  'timeSignature': '4/4',
};
print(tonics['bpm']);

tonics['title'] = 'å¤œæ›²';
print(tonics);
```

å¸¸ç”¨å±æ€§ï¼š

- `length`ï¼šè·å– Map ä¸­é”®å€¼å¯¹çš„ä¸ªæ•°
- `isEmpty`ï¼šæ£€æŸ¥ Map æ˜¯å¦ä¸ºç©º
- `isNotEmpty`ï¼šæ£€æŸ¥ Map æ˜¯å¦ä¸ä¸ºç©º
- `keys`ï¼šè¿”å› Map ä¸­æ‰€æœ‰çš„é”®
- `values`ï¼šè¿”å› Map ä¸­æ‰€æœ‰çš„å€¼

å¸¸ç”¨æ–¹æ³•ï¼š

- `addAll()`ï¼šå‘ Map ä¸­æ·»åŠ å¤šä¸ªé”®å€¼å¯¹
- `remove()`ï¼šç§»é™¤æŒ‡å®šé”®çš„é”®å€¼å¯¹ï¼Œå¹¶è¿”å›è¢«ç§»é™¤çš„å€¼ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› null
- `containsKey()`ï¼šæ£€æŸ¥ Map æ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®
- `containsValue()`ï¼šæ£€æŸ¥ Map æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼
- `clear()`ï¼šæ¸…ç©º Map ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹
- `forEach()`ï¼šå¯¹ Map ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œ
- `map()`ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ Mapï¼Œå¯¹åŸå§‹ Map ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹è¿›è¡Œè½¬æ¢
- `putIfAbsent()`ï¼šå¦‚æœ Map ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„é”®ï¼Œåˆ™æ’å…¥æ–°çš„é”®å€¼å¯¹ï¼Œå¹¶è¿”å›è¯¥å€¼ã€‚å¦‚æœé”®å·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„å€¼
- `update()`ï¼šæ›´æ–°æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œå¯ä»¥é€‰æ‹©æ’å…¥æ–°çš„é”®å€¼å¯¹
- `entries`ï¼šè¿”å› MapEntry å¯¹è±¡çš„è¿­ä»£å™¨ï¼Œç”¨äºéå†é”®å€¼å¯¹

### Operators

Listï¼ŒSetï¼ŒMap å…è®¸ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ `...` `...?`

## Generics

@See https://dart.cn/language/generics/

å®šä¹‰æ³›å‹ï¼š

```dart
// -- æ³›å‹ç±»
class Box<T> {
  T value;
  Box(this.value);
  void display() {
    print('The value is $value');
  }

}


// -- æ³›å‹å‡½æ•°
T getData<T>(T value) {
  return value;
}

// -- æ³›å‹æ¥å£
abstract class Cache<T> {
  getByKey(String key);
  void setByKey(String key, T value);
}

class FileCache<T> implements Cache<T> {
  @override
  getByKey(String key) {
    return null;
  }

  @override
  void setByKey(String key, T value) {
    print("æ–‡ä»¶ç¼“å­˜ï¼škey = ${key} value = ${value}");
  }
}
```

ä½ å¯ä»¥ä½¿ç”¨ `extends` é™åˆ¶æ³›å‹ç±»å‹

## Typedefs

@See https://dart.cn/language/typedefs/

```dart
typedef IntList = List<int>;
IntList nums = [1, 2, 3];
```

# æ¨¡å¼åŒ¹é…

@See https://dart.cn/language/patterns/

Dart 3.0 å¼•å…¥äº†æ¨¡å¼åŒ¹é…ï¼ˆPattern Matchingï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œå…è®¸åœ¨ä»£ç ä¸­æ›´çµæ´»åœ°å¤„ç†ç»“æ„åŒ–æ•°æ®ã€‚æ¨¡å¼åŒ¹é…å¯ä»¥åœ¨ switch è¯­å¥ã€if è¯­å¥å’Œè§£æ„å˜é‡æ—¶ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ Dart 3.0 ä¸­æ¨¡å¼åŒ¹é…çš„å¸¸è§ç”¨æ³•ï¼š

## switch è¡¨è¾¾å¼ä¸­çš„æ¨¡å¼åŒ¹é…

Dart 3.0 çš„ switch è¯­å¥ä¸ä»…å¯ä»¥åŒ¹é…å¸¸é‡ï¼Œè¿˜å¯ä»¥åŒ¹é…å¯¹è±¡çš„ç»“æ„ã€ç±»å‹ã€ä»¥åŠå…¶ä»–æ¨¡å¼ã€‚

```dart
void describeShape(Object shape) {
  switch (shape) {
    case Circle(radius: var r):
      print('Circle with radius $r');
      break;
    case Rectangle(width: var w, height: var h):
      print('Rectangle with width $w and height $h');
      break;
    default:
      print('Unknown shape');
  }
}

class Circle {
  final double radius;
  Circle(this.radius);
}

class Rectangle {
  final double width;
  final double height;
  Rectangle(this.width, this.height);
}

void main() {
  describeShape(Circle(5));
  describeShape(Rectangle(3, 4));
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œswitch è¯­å¥ä¸ä»…åŒ¹é…ç±»å‹ï¼Œè¿˜ä»å¯¹è±¡ä¸­è§£æ„å‡ºå±æ€§ã€‚

## if è¯­å¥ä¸­çš„æ¨¡å¼åŒ¹é…

```dart
void main() {
  Object shape = Circle(5);
  
  if (shape case Circle(radius: var r)) {
    print('Circle with radius $r');
  } else if (shape case Rectangle(width: var w, height: var h)) {
    print('Rectangle with width $w and height $h');
  } else {
    print('Unknown shape');
  }
}
```

è¿™é‡Œä½¿ç”¨äº† case è¡¨è¾¾å¼å°†ç±»å‹åˆ¤æ–­å’Œè§£æ„åˆå¹¶åœ¨ä¸€èµ·ã€‚

## è§£æ„ï¼ˆDestructuringï¼‰

è§£æ„å¯ä»¥ç”¨äºå‡½æ•°è¿”å›çš„å¯¹è±¡ï¼Œå…è®¸ä½ ç›´æ¥å°†å¯¹è±¡å±æ€§åˆ†è§£åˆ°å¤šä¸ªå˜é‡ä¸­ã€‚

```dart
void main() {
  var rectangle = Rectangle(4, 5);
  
  var (w, h) = rectangle;
  print('Width: $w, Height: $h');
}

class Rectangle {
  final double width;
  final double height;
  Rectangle(this.width, this.height);
  
  void deconstruct() => (width, height);
}
```

## é›†åˆä¸­çš„æ¨¡å¼åŒ¹é…

```dart
void main() {
  var list = [1, 2, 3];
  
  switch (list) {
    case [1, 2, var third]:
      print('The third element is $third');
      break;
    default:
      print('Does not match');
  }
}
```

## æ¨¡å¼å®ˆå«ï¼ˆPattern Guardï¼‰

å¯ä»¥åœ¨æ¨¡å¼åŒ¹é…ä¸­æ·»åŠ é¢å¤–çš„æ¡ä»¶ï¼Œç§°ä¸ºæ¨¡å¼å®ˆå«

```dart
void describeNumber(num value) {
  switch (value) {
    case var n when n > 0:
      print('Positive number: $n');
      break;
    case var n when n < 0:
      print('Negative number: $n');
      break;
    default:
      print('Zero');
  }
}
```

æ¨¡å¼å®ˆå«å¯ä»¥è®©æ¨¡å¼åŒ¹é…æ›´åŠ ç²¾ç¡®ï¼Œç»“åˆå¤šä¸ªæ¡ä»¶è¿›è¡Œåˆ¤æ–­ã€‚



Dart 3.0 çš„æ¨¡å¼åŒ¹é…æå¤§åœ°å¢å¼ºäº†ä»£ç çš„çµæ´»æ€§å’Œå¯è¯»æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚æ•°æ®ç»“æ„æ—¶ã€‚å®ƒå…è®¸ä½ é€šè¿‡è§£æ„ã€ç±»å‹åˆ¤æ–­ä»¥åŠæ¨¡å¼å®ˆå«ç­‰æ–¹å¼ç¼–å†™æ›´ç®€æ´çš„ä»£ç ã€‚

# å‡½æ•°æ–¹æ³•

@See https://dart.cn/language/functions/

## å®šä¹‰å‡½æ•°

- ç›´æ¥å£°æ˜
  - Dart ä¸­å£°æ˜å‡½æ•°ä¸éœ€è¦ `function` å…³é”®å­—
- ç®­å¤´å‡½æ•°
  - Dart ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œ**å‡½æ•°ä½“åªèƒ½å†™ä¸€è¡Œä¸”ä¸èƒ½å¸¦æœ‰ç»“æŸçš„åˆ†å·**
  - Dart ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œåªæ˜¯å‡½æ•°çš„ä¸€ç§ç®€å†™å½¢å¼
- åŒ¿åå‡½æ•°
- ç«‹å³æ‰§è¡Œå‡½æ•°

ä»£ç ç¤ºä¾‹ï¼š

```dart
// -- æ— è¿”å›å€¼å‡½æ•°
import 'dart:math';

void sayHello() {
  print('Hello');
}

// -- æœ‰å›å€¼çš„å‡½æ•°
int getAge() {
  return 30;
}

// -- å˜é‡å‡½æ•°ï¼ˆåŒ¿åå‡½æ•°ï¼‰
var sayHi = () {
  print('Hi');
};

// -- ç®­å¤´å‡½æ•°
int sum(int a, int b) => a + b;

void main(List<String> args) {
  // -- è°ƒç”¨å‡½æ•°
  sayHello();
  getAge();
  sayHi();
  print(sum(10, 20));

  // -- ç«‹å³æ‰§è¡Œå‡½æ•°
  ((int n) {
    print(sqrt(n));
  })(16);
}
```

## å‡½æ•°å‚æ•°

**å¿…å¡«å‚æ•°**ï¼šå®šä¹‰æ—¶ç›´æ¥å£°æ˜å‚æ•°çš„ç±»å‹å’Œåç§°ï¼Œå¿…é¡»ä¼ é€’ã€‚

```dart
void greet(String name) {
  print('Hello, $name!');
}
```

**å¯é€‰å‚æ•°**ï¼š

- å¯é€‰å‚æ•°æ”¾åœ¨å¿…å¡«å‚æ•°åï¼Œç”¨ **ä¸­æ‹¬å·** åŒ…è£¹ã€‚
- å¯é€‰å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ã€‚

```dart
void greet(String name, [String greeting = 'Hello']) {
  print('$greeting, $name!');
}
```

**å‘½åå‚æ•°**ï¼š

- ç”¨ **å¤§æ‹¬å·** åŒ…è£¹ã€‚
- è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‚æ•°åéœ€ä¸å‡½æ•°å£°æ˜ä¸€è‡´ã€‚
- å‘½åå‚æ•°å¯ä»¥æ˜¯å¿…å¡«çš„æˆ–å¯é€‰çš„ã€‚

```dart
void greet({required String name, String greeting = 'Hello'}) {
  print('$greeting, $name!');
}
```

**å‡½æ•°å‚æ•°**ï¼šå°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’

```dart
void processTicket(int count, Function onComplete) {
  Future.delayed(Duration(seconds: 1), () {
    onComplete();
  });
}
```

## åŒ¿åå‡½æ•°

```dart
var uppercaseList = list.map((item) => item.toUpperCase()).toList();
uppercaseList.forEach((item) => print('$item: ${item.length}'));
```

## è¯æ³•ä½œç”¨åŸŸ

åœ¨ Dart ä¸­ï¼Œ**è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰å†³å®šäº†å˜é‡çš„å¯è§æ€§å’Œè®¿é—®æƒé™ã€‚è¯æ³•ä½œç”¨åŸŸæ„å‘³ç€å˜é‡çš„èŒƒå›´æ˜¯æ ¹æ®ä»£ç çš„å¸ƒå±€æ¥å†³å®šçš„ï¼Œè€Œä¸æ˜¯æ ¹æ®ç¨‹åºè¿è¡Œæ—¶çš„åŠ¨æ€ç¯å¢ƒã€‚è¿™ç±»ç¼–ç¨‹è¯­è¨€ç§°ä¸ºè¯æ³•ä½œç”¨åŸŸè¯­è¨€**ã€‚å¯ä»¥é€šè¿‡â€œå‘å¤–å¯»æ‰¾èŠ±æ‹¬å·â€æ¥åˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦åœ¨ä½œç”¨åŸŸä¸­ã€‚

æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä¾‹å­ï¼Œå±•ç¤ºäº†ä¸åŒå±‚çº§çš„åµŒå¥—å‡½æ•°ä»¥åŠæ¯ä¸ªå±‚çº§çš„å˜é‡å®šä¹‰ï¼š

```dart
bool topLevel = true;

void main() {
  var insideMain = true;

  void myFunction() {
    var insideFunction = true;

    void nestedFunction() {
      var insideNestedFunction = true;

      assert(topLevel);
      assert(insideMain);
      assert(insideFunction);
      assert(insideNestedFunction);
    }
  }
}
```

è¿™ä¸ªä¾‹å­ä¸­æœ‰å¤šä¸ªåµŒå¥—ä½œç”¨åŸŸï¼ˆscopeï¼‰ï¼Œæ¯ä¸ªä½œç”¨åŸŸä¸­å®šä¹‰äº†ä¸åŒçš„å˜é‡ã€‚`nestedFunction()` æ˜¯æœ€æ·±å±‚çš„åµŒå¥—å‡½æ•°ï¼Œå®ƒå¯ä»¥è®¿é—®æ‰€æœ‰å¤–éƒ¨ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ã€‚

## é—­åŒ…

é—­åŒ…æ˜¯å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å‡½æ•°ã€‚

é—­åŒ…èƒ½å¤Ÿâ€œæ•è·â€å‡½æ•°å¤–éƒ¨çš„å˜é‡ï¼Œå¹¶åœ¨é—­åŒ…æ‰§è¡Œæ—¶ä½¿ç”¨è¿™äº›å˜é‡ã€‚

æ— è®ºé—­åŒ…åœ¨ä½•å¤„æ‰§è¡Œï¼Œå®ƒéƒ½å¯ä»¥è®¿é—®å¹¶ä½¿ç”¨å®ƒæ•è·çš„å˜é‡ï¼Œå½¢æˆä¸€ç§å»¶ç»­çš„ä½œç”¨åŸŸå…³ç³»ã€‚

```dart
Function closures(int n) {
  return (int m) => m + n;
}

var fn = closures(10);
print(fn(1));
print(fn(5));
```

## å¼‚æ­¥å‡½æ•°

åœ¨ Dart ä¸­ï¼Œå¼‚æ­¥å‡½æ•°å¤„ç†ä¾èµ–äº Future å’Œ async/await å…³é”®å­—ã€‚å®ƒä»¬å…è®¸ç¨‹åºæ‰§è¡Œå¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ç­‰ï¼‰è€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ä¸‹é¢ä»‹ç» Dart ä¸­å¼‚æ­¥å‡½æ•°å¤„ç†çš„å¸¸è§æ–¹å¼ã€‚

### Future

Future æ˜¯ Dart ä¸­ç”¨äºè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„æ ¸å¿ƒç±»å‹ã€‚å®ƒä»£è¡¨ä¸€ä¸ªå¯èƒ½åœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹å®Œæˆçš„å€¼æˆ–é”™è¯¯ã€‚

**åˆ›å»º Future**

- `Future.value()` åˆ›å»ºä¸€ä¸ªå·²ç»å®Œæˆçš„ Futureã€‚
- `Future.delayed()` åˆ›å»ºä¸€ä¸ªå»¶è¿Ÿå®Œæˆçš„ Futureã€‚
- `Future.error()` åˆ›å»ºä¸€ä¸ªç«‹å³æŠ›å‡ºé”™è¯¯çš„ Futureã€‚

```dart
Future<String> fetchData() {
  return Future.delayed(Duration(seconds: 2), () => 'Data loaded');
}
```

### async å’Œ await

ä½¿ç”¨ async æ ‡è®°çš„å‡½æ•°è¿”å›ä¸€ä¸ª Futureï¼Œå³ä½¿å‡½æ•°å†…éƒ¨è¿”å›çš„æ˜¯é Future ç±»å‹ã€‚await å…³é”®å­—ç”¨äºç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆï¼Œåœ¨æ­¤æœŸé—´ï¼Œä»£ç ä¸ä¼šé˜»å¡ï¼Œå®ƒä¼šç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆå¹¶è·å–ç»“æœã€‚

```dart
Future<void> fetchData() async {
  print('Fetching data...');
  
  // -- ä½¿ç”¨ await ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
  var data = await Future.delayed(Duration(seconds: 2), () => 'Data loaded');
  
  print(data); // Data loaded
}

void main() {
  fetchData();
  print('Waiting for data...');
}
```

**æ‰§è¡Œæµç¨‹**ï¼š

1. `fetchData()` å‡½æ•°è¢«è°ƒç”¨ï¼Œæ‰§è¡Œåˆ° await æ—¶ï¼Œå®ƒä¼šæš‚åœæ‰§è¡Œï¼Œç­‰å¾… Future å®Œæˆã€‚
2. åŒæ—¶ï¼Œ`main()` ä¸­çš„ `print('Waiting for data...')` ç«‹å³æ‰§è¡Œï¼Œå› ä¸º await ä¸ä¼šé˜»å¡æ•´ä¸ªç¨‹åºã€‚
3. 2 ç§’åï¼Œawait è·å–å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œæ‰“å° Data loadedã€‚

### é”™è¯¯å¤„ç†

å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯å¯ä»¥é€šè¿‡ try-catch å¤„ç†ï¼š

```dart
Future<void> fetchData() async {
  try {
    var data = await Future.delayed(Duration(seconds: 2), () {
      throw 'Failed to load data';
    });
    print(data);
  } catch (e) {
    print('Error: $e');
  }
}

void main() {
  fetchData();
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œtry-catch æ•è·äº†å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯ï¼Œé¿å…ç¨‹åºå´©æºƒã€‚

### ä½¿ç”¨ then() å’Œ catchError()

é™¤äº† async/awaitï¼Œè¿˜å¯ä»¥ä½¿ç”¨ then() å’Œ catchError() æ¥å¤„ç† Future çš„ç»“æœå’Œé”™è¯¯ï¼š

```dart
void fetchData() {
  Future.delayed(Duration(seconds: 2), () => 'Data loaded')
    .then((data) {
      print(data); // Data loaded
    }).catchError((error) {
      print('Error: $error');
    });
}

void main() {
  fetchData();
}
```

### å¤šä¸ª Future çš„å¤„ç†ï¼šFuture.wait()

å½“ä½ æœ‰å¤šä¸ªå¼‚æ­¥æ“ä½œéœ€è¦å¹¶è¡Œæ‰§è¡Œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Future.wait()ï¼Œå®ƒä¼šç­‰å¾…æ‰€æœ‰çš„ Future å®Œæˆã€‚

```dart
Future<void> fetchMultipleData() async {
  var results = await Future.wait([
    Future.delayed(Duration(seconds: 2), () => 'Data 1'),
    Future.delayed(Duration(seconds: 3), () => 'Data 2'),
  ]);

  print(results); // [Data 1, Data 2]
}

void main() {
  fetchMultipleData();
}
```

### æ€»ç»“

- Future æ˜¯ Dart ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„åŸºç¡€ã€‚
- ä½¿ç”¨ async å’Œ await å¯ä»¥è®©ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œä½†å®é™…æ˜¯å¼‚æ­¥çš„ã€‚
- é”™è¯¯å¤„ç†å¯ä»¥é€šè¿‡ `try-catch` æˆ– `catchError()` æ¥å®Œæˆã€‚
- å¯ä»¥é€šè¿‡ `Future.wait()` å¹¶è¡Œå¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œã€‚

# æ§åˆ¶æµ

- å¾ªç¯ï¼š`for`ã€`while`ã€`do...while`

- åˆ†æ”¯ï¼š`switch`ã€`if-else`ã€`if-case`

# ç±» & å¯¹è±¡

## ç±»

- ç±»æ˜¯é€šè¿‡ `class` å£°æ˜çš„ä»£ç æ®µï¼ŒåŒ…å«å±æ€§å’Œæ–¹æ³•
  - å±æ€§ï¼šç”¨æ¥æè¿°ç±»çš„å˜é‡
  - æ–¹æ³•ï¼šç±»ä¸­çš„å‡½æ•°ç§°ä¸ºç±»çš„æ–¹æ³•
- å¯¹è±¡æ˜¯ç±»çš„ **å®ä¾‹åŒ–** ç»“æœï¼Œå¦‚ï¼š`var obj = new MyClass()`
- ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡ï¼Œå¯¹è±¡æ˜¯ç±»çš„å…·ä½“å®ç°
- ç¼–ç¨‹æ–¹å¼
  - é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰
  - é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼ˆPOPï¼‰

ä»£ç ç¤ºä¾‹ï¼š

```dart

// å£°æ˜ç±»
class Person {
  // ç±»çš„å±æ€§
  String name = "å¼ ä¸‰";
  // ç±»çš„æ–¹æ³•
  void sayHello() {
    print("Helloï¼Œ$nameï¼");
  }
}

void main(List<String> args) {
  // å®ä¾‹åŒ–ç±»ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªå¯¹è±¡
  Person p = new Person();

  // è®¿é—®ç±»ä¸­çš„å±æ€§
  print(p.name);

  // è®¿é—®ç±»çš„æ–¹æ³•
  p.sayHello();

  // Dart ä¸­ æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯å¯¹è±¡
  Map m = new Map();
  print(m.length);

  m.addAll({"name": "æå››", "age": 20});
  print(m.length);
}
```

### æ„é€ å™¨ï¼ˆæ„é€ å‡½æ•°ï¼‰

- é»˜è®¤æ„é€ å‡½æ•°
  - ä¸ç±»åŒåçš„æ„é€ å‡½æ•°ï¼Œåœ¨å®ä¾‹åŒ–æ—¶ï¼Œè‡ªåŠ¨è¢«è°ƒç”¨ã€‚
- å‘½åæ„é€ å‡½æ•°
  - åœ¨ç±»ä¸­ä½¿ç”¨å‘½åæ„é€ å™¨ï¼ˆ **ç±»å.å‡½æ•°å**ï¼‰å®ç°å¤šä¸ªæ„é€ å™¨ï¼Œå¯ä»¥æä¾›é¢å¤–çš„æ¸…æ™°åº¦ã€‚
- å¸¸é‡æ„é€ å‡½æ•°
  - å¦‚æœç±»ç”Ÿæˆçš„å¯¹è±¡ä¸ä¼šæ”¹å˜ï¼Œæ‚¨å¯ä»¥é€šè¿‡å¸¸é‡æ„é€ å‡½æ•°ä½¿è¿™äº›å¯¹è±¡æˆä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚
- å·¥å‚æ„é€ å‡½æ•°
  - é€šè¿‡ `factory` å£°æ˜ï¼Œå·¥å‚å‡½æ•°ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå®ä¾‹ï¼Œè€Œæ˜¯é€šè¿‡ä»£ç æ¥å†³å®šè¿”å›çš„å®ä¾‹ã€‚

ä»£ç ç¤ºä¾‹1ï¼šé»˜è®¤æ„é€ å‡½æ•°

```dart
/// å†™æ³•1
class Point1 {
  // num x;
  // num y;
  num x, y;

  // å£°æ˜æ™®é€šæ„é€ å‡½æ•°
  Point1() {
    print("æˆ‘æ˜¯é»˜è®¤æ„é€ å‡½æ•°ï¼Œå®ä¾‹åŒ–æ—¶ï¼Œä¼šç¬¬ä¸€ä¸ªè¢«è°ƒç”¨");

    // -- thiså¯ä»¥çœç•¥
    // x = 0;
    // y = 0;

    // -- å½“å‘½åæŒ‡å‘æœ‰æ­§ä¹‰æ—¶ï¼Œthis ä¸èƒ½çœç•¥
    this.x = 0;
    this.y = 0;
  }
}

/// å†™æ³•2
class Point2 {
  num x, y;

  // å£°æ˜æ™®é€šæ„é€ å‡½æ•°
  Point2(num x, num y) {
    this.x = x;
    this.y = y;
  }
}

/// å†™æ³•3
class Point3 {
  num x, y;

  // å£°æ˜æ™®é€šæ„é€ å‡½æ•°
  Point3(this.x, this.y);
}

void main(List<String> args) {
  var p1 = new Point1();
  print(p1.x);

  var p2 = new Point2(10, 20);
  print(p2.x);

  var p3 = new Point3(10, 20);
  print(p3.x);
}
```

ä»£ç ç¤ºä¾‹2ï¼šå‘½åæ„é€ å‡½æ•°

```dart
class Point {
  num x, y;
  Point(this.x, this.y);

  // å‘½åæ„é€ å‡½æ•°
  Point.origin() {
    x = 0;
    y = 0;
  }

  // å‘½åæ„é€ å‡½æ•°
  Point.fromJson({x: 0, y: 0}) {
    this.x = x;
    this.y = y;
  }
}

void main(List<String> args) {
  // é»˜è®¤åæ ‡
  Point p1 = new Point.origin();
  print(p1.x);

  // æ‰‹åŠ¨è®¾ç½®åæ ‡
  Point p2 = new Point.fromJson(x: 6, y: 6);
  print(p2.x);
}
```

ä»£ç ç¤ºä¾‹3ï¼šå¸¸é‡æ„é€ å‡½æ•°

```dart
class Point {
  num x;
  num y;

  Point(this.x, this.y);
}

class ImmutablePoint {
  // å±æ€§å¿…é¡»é€šè¿‡ final å£°æ˜
  final num x;
  final num y;
  // å¸¸é‡æ„é€ å‡½æ•°å¿…é¡»é€šè¿‡ const å£°æ˜
  const ImmutablePoint(this.x, this.y);
}

void main(List<String> args) {
  var p1 = new Point(1, 2);
  var p2 = new Point(1, 2);
  print(p1 == p2); // false

  // å¸¸é‡æ„é€ å‡½æ•°ï¼Œå¯ä»¥å½“åšæ™®é€šæ„é€ å‡½æ•°ä½¿ç”¨
  var p3 = new ImmutablePoint(1, 2);
  var p4 = new ImmutablePoint(1, 2);
  print(p3 == p4); // false

  // å£°æ˜ä¸å¯å˜å¯¹è±¡ï¼Œå¿…é¡»é€šè¿‡ const å…³é”®å­—
  var p5 = const ImmutablePoint(1, 2);
  var p6 = const ImmutablePoint(1, 2);
  print(p5 == p6); // true

  // å®ä¾‹åŒ–æ—¶ï¼Œnew å…³é”®å­—ï¼Œå¯ä»¥çœç•¥
  var p7 = ImmutablePoint(1, 2);
  var p8 = ImmutablePoint(1, 2);
  print(p7 == p8); // false
}
```

ä»£ç ç¤ºä¾‹4ï¼šå·¥å‚æ„é€ å‡½æ•°

```dart
class Person {
  String name;
  static Person instance;
  // å·¥å‚æ„é€ å‡½æ•°
  factory Person([String name = "åˆ˜å¤‡"]) {
    // å·¥å‚æ„é€ å‡½æ•°ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ this å…³é”®å­—
    // print(this.name);
    if (Person.instance == null) {
      // ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–
      Person.instance = Person.newSelf(name);
    }
    // éç¬¬ä¸€æ¬¡å®ä¾‹åŒ–
    return instance;
  }

  // å‘½åæ„é€ å‡½æ•°
  Person.newSelf(this.name);
}

void main(List<String> args) {
  // å®ä¾‹åŒ–æ“ä½œ
  Person p1 = new Person("å…³ç¾½");
  print(p1.name);

  Person p2 = new Person("å¼ é£");
  print(p2.name);

  print(p1 == p2);
}
```

### è®¿é—®ä¿®é¥°

- Dart ä¸ TypeScript ä¸åŒï¼Œæ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦ï¼ˆ`public`ã€`protected`ã€`private`ï¼‰
- Dart ç±»ä¸­ï¼Œé»˜è®¤çš„è®¿é—®ä¿®é¥°ç¬¦æ˜¯å…¬å¼€çš„ï¼ˆå³ `public`ï¼‰
- å¦‚æœ **å±æ€§** å’Œ **æ–¹æ³•** ä»¥ `_`ï¼ˆä¸‹åˆ’çº¿ï¼‰å¼€å¤´ï¼Œåˆ™è¡¨ç¤ºç§æœ‰ï¼ˆå³ `private`ï¼‰
- **åªæœ‰æŠŠç±»å•ç‹¬æŠ½ç¦»å‡ºå»ï¼Œç§æœ‰å±æ€§å’Œæ–¹æ³•æ‰èµ·ä½œç”¨**
  - *`lib/xxx.dart`*
  - *`import 'lib/xxx.dart'`*

### Getter å’Œ Setter

- Getterï¼ˆè·å–å™¨ï¼‰æ˜¯é€šè¿‡ `get` å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•
  - å‡½æ•°æ²¡æœ‰å°æ‹¬å·ï¼Œè®¿é—®æ—¶ä¹Ÿæ²¡æœ‰å°æ‹¬å·ï¼ˆåƒè®¿é—®å±æ€§ä¸€æ ·è®¿é—®æ–¹æ³•ï¼‰
- Setterï¼ˆä¿®æ”¹å™¨ï¼‰æ˜¯é€šè¿‡ `set` å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•
  - è®¿é—®æ—¶ï¼Œåƒè®¾ç½®å±æ€§ä¸€æ ·ç»™å‡½æ•°ä¼ å‚

ä»£ç ç¤ºä¾‹ï¼š

```dart
class Circle {
  final double PI = 3.14;
  num r;
  Circle(this.r);

  // -- Getters

  // num area() {
  //   return this.PI * this.r * this.r;
  // }

  /** ä½¿ç”¨ get å£°æ˜çš„æ–¹æ³•ï¼Œä¸èƒ½æœ‰å°æ‹¬å· */
  num get area {
    return this.PI * this.r * this.r;
  }

  // -- Setters
  set setR(value) {
    this.r = value;
  }
}

void main(List<String> args) {
  var c = new Circle(10);

  // é€šè¿‡ Setter ä¿®æ”¹å±æ€§
  c.setR = 20;
  
  // é€šè¿‡ Getter è®¿é—®é¢ç§¯
  print(c.area);
}

```

### åˆå§‹åŒ–åˆ—è¡¨

- ä½œç”¨ï¼šåœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®å±æ€§çš„é»˜è®¤å€¼
- æ—¶æœºï¼šåœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰æ‰§è¡Œ
- è¯­æ³•ï¼šä½¿ç”¨é€—å·åˆ†å‰²åˆå§‹åŒ–è¡¨è¾¾å¼
- åœºæ™¯ï¼šå¸¸ç”¨äºè®¾ç½® `final` äº§é‡çš„å€¼

ä»£ç ç¤ºä¾‹ï¼š

```dart
class Rect {
  int width;
  int height;

  // Rect(this.width, this.height);

  // Rect([int width = 2, int height = 2]) {
  //   this.width = width;
  //   this.height = height;
  //   print("${this.width} -- ${this.height}");
  // }

  // Rect({int width = 2, int height = 2}) {
  //   this.width = width;
  //   this.height = height;
  //   print("${this.width} -- ${this.height}");
  // }

  Rect() : width = 4, height = 20 {
    print("${this.width} -- ${this.height}");
  }
}

class Point {
  double x, y, z;

  Point(this.x, this.y, this.z);

  // åˆå§‹åŒ–åˆ—è¡¨çš„ç‰¹æ®Šç”¨æ³•ï¼ˆé‡å®šå‘æ„é€ å‡½æ•°ï¼‰
  Point.twoD(double x, double y) : this(x, y, 0);
}

void main(List<String> args) {
  var r = new Rect();

  var p1 = new Point(1, 2, 3);
  print(p1.z);

  var p2 = new Point.twoD(4, 5);
  print(p2.z);
}
```

### static

- `static` å…³é”®å­—ç”¨æ¥æŒ‡å®šé™æ€æˆå‘˜
  - é€šè¿‡ `static` ä¿®é¥°çš„å±æ€§æ˜¯é™æ€å±æ€§
  - é€šè¿‡ `static` ä¿®é¥°çš„æ–¹æ³•æ˜¯é™æ€æ–¹æ³•
- é™æ€æˆå‘˜å¯ä»¥é€šè¿‡ç±»åç§°ç›´æ¥è®¿é—®ï¼ˆä¸éœ€è¦å®ä¾‹åŒ–ï¼‰
  - å®ä¾‹åŒ–æ—¶æ¯”è¾ƒæ¶ˆè€—èµ„æºçš„ï¼Œå£°æ˜é™æ€æˆå‘˜ï¼Œå¯ä»¥æé«˜ç¨‹åºæ€§èƒ½
- é™æ€æ–¹æ³•ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ï¼Œéé™æ€æ–¹æ³•å¯ä»¥è®¿é—®é™æ€æˆå‘˜
  - é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ `this` å…³é”®å­—
  - ä¸èƒ½ä½¿ç”¨ `this` å…³é”®å­—ï¼Œè®¿é—®é™æ€å±æ€§

### å…ƒæ•°æ®

- å…ƒæ•°æ®ä»¥ `@` å¼€å¤´ï¼Œå¯ä»¥ç»™ä»£ç æ ‡è®°ä¸€äº›é¢å¤–çš„ä¿¡æ¯
  - å…ƒæ•°æ®å¯ä»¥ç”¨åœ¨åº“ã€ç±»ã€æ„é€ å™¨ã€å‡½æ•°ã€å­—æ®µã€å‚æ•°æˆ–å˜é‡å£°æ˜çš„ç­¾å
- `@override`ï¼ˆ**é‡å†™**ï¼‰
  - æŸæ–¹æ³•æ·»åŠ è¯¥æ³¨è§£åï¼Œè¡¨ç¤ºé‡å†™äº†çˆ¶ç±»ä¸­çš„åŒåæ–¹æ³•
- `@required`ï¼ˆ**å¿…å¡«**ï¼‰
  - å¯ä»¥é€šè¿‡ `@required` æ¥æ³¨è§£ Dart ä¸­çš„å‘½åå‚æ•°ï¼Œç”¨æ¥æŒ‡ç¤ºå®ƒæ˜¯å¿…å¡«å‚æ•°
- `@deprecated`ï¼ˆ**å¼ƒç”¨**ï¼‰
  - è‹¥æŸç±»æˆ–æŸæ–¹æ³•åŠ ä¸Šè¯¥æ³¨è§£ä¹‹åï¼Œè¡¨ç¤ºæ­¤æ–¹æ³•æˆ–ç±»ä¸å†å»ºè®®ä½¿ç”¨

## ç»§æ‰¿

- æ ¹æ®ç±»çš„å…ˆåé¡ºåºï¼Œå¯ä»¥å°†ç±»åˆ†æˆ **çˆ¶ç±»** å’Œ **å­ç±»**
- å­ç±»é€šè¿‡ `extends` å…³é”®å­— **ç»§æ‰¿** çˆ¶ç±»
  - ç»§æ‰¿åï¼Œå­ç±»å¯ä»¥ä½¿ç”¨çˆ¶ç±»ä¸­ï¼Œ**å¯è§çš„** å†…å®¹ï¼ˆå±æ€§æˆ–æ–¹æ³•ï¼‰
- å­ç±»ä¸­ï¼Œå¯ä»¥é€šè¿‡ `@override` å…ƒæ•°æ®æ¥æ ‡è®° â€**è¦†å†™**â€œæ–¹æ³•
  - â€**è¦†å†™**â€œæ–¹æ³•ï¼šå­ç±»ä¸­ä¸çˆ¶ç±»ä¸­åŒåçš„æ–¹æ³•
- å­ç±»ä¸­ï¼Œå¯ä»¥é€šè¿‡ `super` å…³é”®å­—æ¥å¼•ç”¨çˆ¶ç±»ä¸­ï¼Œå¯è§çš„å†…å®¹
  - å±æ€§
  - æ–¹æ³•ï¼ˆæ™®é€šæ„é€ å‡½æ•°ï¼Œå‘½åæ„é€ å‡½æ•°ï¼‰

## æŠ½è±¡ç±»

- æŠ½è±¡ç±»æ˜¯ç”¨ `abstract` å…³é”®å­—ä¿®é¥°çš„ç±»
- æŠ½è±¡ç±»çš„ **ä½œç”¨** æ˜¯å……å½“æ™®é€šç±»çš„æ¨¡æ¿ï¼Œçº¦å®šä¸€äº›å¿…è¦çš„å±æ€§å’Œæ–¹æ³•
- **æŠ½è±¡æ–¹æ³•** æ˜¯æŒ‡ **æ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•**
  - æŠ½è±¡ç±»ä¸­ä¸€èˆ¬éƒ½æœ‰æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•
  - æ™®é€šç±»ä¸­ï¼Œä¸èƒ½æœ‰æŠ½è±¡æ–¹æ³•
- æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼ˆä¸èƒ½è¢« `new`ï¼‰
- æŠ½è±¡ç±»å¯ä»¥è¢«æ™®é€šç±»ç»§æ‰¿ï¼ˆ`extends`ï¼‰
  - å¦‚æœæ™®é€šç±»ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•
- æŠ½è±¡ç±»è¿˜å¯ä»¥æ˜¯å……å½“æ¥å£è¢«å®ç°ï¼ˆ`implements`ï¼‰
  - å¦‚æœæŠŠæŠ½è±¡ç±»å½“åšæ¥å£å®ç°çš„è¯ï¼Œæ™®é€šç±»å¿…é¡»å¾—å®ç°æŠ½è±¡ç±»é‡Œé¢å®šä¹‰çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•

ä»£ç ç¤ºä¾‹ï¼š

```dart
// 1. æŠ½è±¡ç±»å¿…é¡»é€šè¿‡ abstract å…³é”®å­—å£°æ˜
// 2. æŠ½è±¡ç±»ä¸­ï¼Œå¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒæŠ½è±¡ç±»éƒ½æœ‰æŠ½è±¡æ–¹æ³•
import '10_metadata.dart';

abstract class Phone {
  // å£°æ˜æŠ½è±¡æ–¹æ³•
  void processor(); // å¤„ç†å™¨
  void camera(); // æ‘„åƒå¤´

  void info() {
    print("æˆ‘æ˜¯æŠ½è±¡ç±»ä¸­çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•");
  }
}

class Xiaomi extends Phone {
  // æ™®é€šç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œå°±å¿…é¡»å®ç°æŠ½è±¡ç±»æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•
  @override
  void processor() {
    print("éªé¾™888");
  }

  @override
  void camera() {
    print("ä¸‰æ˜Ÿæ‘„åƒå¤´");
  }
}

class Huawei extends Phone {
  // æ™®é€šç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œå°±å¿…é¡»å®ç°æŠ½è±¡ç±»æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•
  @override
  void processor() {
    print("éº’éºŸ990");
  }

  @override
  void camera() {
    print("è±å¡æ‘„åƒå¤´");
  }

  // æ™®é€šç±»ä¸­ä¸èƒ½æœ‰æŠ½è±¡æ–¹æ³•
  // void aaa();

}

void main(List<String> args) {
  // æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–
  // var p1 = new Phone();

  Xiaomi m = new Xiaomi();
  m.processor();
  m.camera();
  m.info();

  Huawei h = new Huawei();
  h.processor();
  h.camera();
}

```

## æ¥å£

- æ¥å£åœ¨ Dart ä¸­å°±æ˜¯ä¸€ä¸ªç±»ï¼ˆåªæ˜¯ç”¨æ³•ä¸åŒï¼‰
  - ä¸ Java ä¸åŒï¼ŒJava ä¸­çš„æ¥å£éœ€è¦ç”¨ `interface` å…³é”®å­—å£°æ˜ï¼› Dart ä¸­ä¸éœ€è¦
  - æ¥å£å¯ä»¥æ˜¯ä»»æ„ç±»ï¼Œä½†ä¸€èˆ¬ä½¿ç”¨æŠ½è±¡ç±»åšæ¥å£
- ä¸€ä¸ªç±»å¯ä»¥ **å®ç°ï¼ˆ`implements`ï¼‰** å¤šä¸ªå€Ÿå£ï¼Œå¤šä¸ªæ¥å£ç”¨é€—å·åˆ†å‰²
  - æ¥å£å¯ä»¥çœ‹æˆä¸€ä¸ªä¸ªå°é›¶ä»¶ã€‚ç±»å®ç°æ¥å£å°±ç›¸å½“äºç»„è£…é›¶ä»¶
- æ™®é€šç±»å®ç°æ¥å£åï¼Œå¿…é¡»é‡å†™æ¥å£ä¸­æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•

ä»£ç ç¤ºä¾‹ï¼š

```dart
// æ‰‹æœºçš„å¤„ç†å™¨
abstract class Processor {
  String cores; // å†…æ ¸ï¼š2æ ¸ï¼Œ4æ ¸
  arch(String name); // èŠ¯ç‰‡åˆ¶ç¨‹ï¼š7nmï¼Œ5nm
}

// æ‰‹æœºçš„æ‘„åƒå¤´
abstract class Camera {
  String resolution; // åˆ†è¾¨ç‡ï¼š1000ä¸‡ï¼Œ3000ä¸‡
  brand(String name); // å“ç‰Œï¼šä¸‰æ˜Ÿï¼Œè±å¡ï¼Œè”¡å¸
}

// é€šè¿‡æ™®é€šç±»å®ç°æ¥å£
class Phone implements Processor, Camera {
  @override
  String cores;

  @override
  String resolution;

  Phone(this.cores, this.resolution);

  @override
  arch(String name) {
    print("èŠ¯ç‰‡åˆ¶ç¨‹ï¼š$name");
  }

  @override
  brand(String name) {
    print("ç›¸æœºå“ç‰Œï¼š$name");
  }
}

void main(List<String> args) {
  Phone p = new Phone("4æ ¸", "3000ä¸‡");
  p.arch("5nm");
  p.brand("è±å¡");
}
```

## æ··å…¥

- æ··å…¥ï¼ˆMixinï¼‰æ˜¯ä¸€æ®µå…¬å…±ä»£ç ã€‚æ··å…¥æœ‰ä¸¤ç§å£°æ˜æ–¹å¼ï¼š
  - å°†ç±»å½“åšæ··å…¥ â†’ `class MixinA { ... }`
    - ä½œä¸º Mixin çš„ç±»åªèƒ½ç»§æ‰¿è‡ª Objectï¼Œä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»
    - ä½œä¸º Mixin çš„ç±»ä¸èƒ½æœ‰æ„é€ å‡½æ•°
  - é€šè¿‡ `mixin` å…³é”®å­—å£°æ˜ â†’ `mixin MixinB { ... }`
- æ··å…¥ï¼ˆMixinï¼‰å¯ä»¥æé«˜ä»£ç å¤ç”¨çš„æ•ˆç‡ï¼Œæ™®é€šç±»å¯ä»¥é€šè¿‡ `with` æ¥ä½¿ç”¨æ··å…¥
  - `class MyClass with MixinA, MixinB { ... }`
- ä½¿ç”¨å¤šä¸ªæ··å…¥æ—¶ï¼Œåå¼•å…¥çš„æ··å…¥ä¼šè¦†ç›–ä¹‹å‰æ··å…¥ä¸­çš„é‡å¤çš„å†…å®¹
  - MixinA å’Œ MixinBä¸­éƒ½ç”¨ `hello()` æ–¹æ³•ï¼ŒMyClass ä¼šä½¿ç”¨ MixinB ä¸­çš„

ä»£ç ç¤ºä¾‹ï¼š

```dart
class Father {}

// class MixinA extends Father { // ç”¨ä½œæ··å…¥çš„ç±»ï¼Œä¸èƒ½ç»§æ‰¿é™¤äº† Object ä»¥å¤–çš„å…¶ä»–ç±»
// class MixinA extends Object {
class MixinA {
  String name = "MixinA";

  // MixinA(); // ç”¨ä½œæ··å…¥çš„ç±»ï¼Œä¸èƒ½æ‹¥æœ‰æ„é€ å‡½æ•°

  void printA() {
    print("A");
  }

  void run() {
    print("A is running");
  }
}

mixin MixinB {
  String name = "MixinB";
  void printB() {
    print("B");
  }

  void run() {
    print("B is running");
  }
}

class MyClass with MixinA, MixinB {}

void main(List<String> args) {
  var c = new MyClass();
  c.printA();
  c.printB();

  // ï¼æ³¨æ„ï¼šåå¼•å…¥çš„æ··å…¥ï¼Œä¼šè¦†ç›–ä¹‹å‰å¼•å…¥çš„æ··å…¥ä¸­é‡å¤çš„å†…å®¹
  print(c.name); // B
  c.run(); // B is running
}
```

## æ³›å‹

- æ³›å‹æ˜¯åœ¨ **å‡½æ•°ã€ç±»ã€æ¥å£** ä¸­æŒ‡å®š **å®½<u>æ³›</u>æ•°æ®ç±»<u>å‹</u>** çš„è¯­æ³•ã€‚

  - æ³›å‹å‡½æ•°
  - æ³›å‹ç±»
  - æ³›å‹æ¥å£

- é€šå¸¸ï¼Œåœ¨å°–æ‹¬å·ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªå­—æ¯æ¥ä»£è¡¨ç±»å‹ï¼Œä¾‹å¦‚ï¼šE/T/S/K å’Œ V ç­‰ã€‚

  ```dart
  è¿”å›ç±»å‹ å‡½æ•°å<è¾“å…¥ç±»å‹>(å‚æ•°ç±»å‹ å‚æ•°){
  	å‡½æ•°ä½“
  }
  ```

  ```dart
  T getData<T>(T value) {
  	return value;
  }
  ```

  ![](./IMGS/generics.jpg)

ä»£ç ç¤ºä¾‹ï¼š

```dart
// -- æ³›å‹å‡½æ•°
T getData<T>(T value) {
  return value;
}

// æ³›å‹ç±»
class GenericsClass<T> {
  Set s = new Set<T>();
  
  void add(T value) {
    this.s.add(value);
  }

  void info() {
    print(this.s);
  }
}

// æ³›å‹æ¥å£
abstract class Cache<T> {
  getByKey(String key);
  void setByKey(String key, T value);
}
class FileCache<T> implements Cache<T> {
  @override
  getByKey(String key) {
    return null;
  }

  @override
  void setByKey(String key, T value) {
    print("æ–‡ä»¶ç¼“å­˜ï¼škey = ${key} value = ${value}");
  }
}
```

### æ³›å‹ç±»å‹é™åˆ¶

```dart
class SomeBaseClass {
  // ...
}

class AnotherClass {
  // ...
}

// å­ç±»
class Extender extends SomeBaseClass {}

class Foo<T extends SomeBaseClass> {
  String toString() => "Instance of 'Foo<$T>'";
}

void main(List<String> args) {
  var someBaseClassFoo = Foo<SomeBaseClass>();
  print(someBaseClassFoo);

  var extenderFoo = Foo<Extender>();
  print(extenderFoo);

  var foo = Foo();
  print(foo);

  // var f = Foo<AnotherClass>(); // ç±»å‹ä¸å¯¹ï¼ŒæŠ¥é”™
  // print(f);
}
```

## æšä¸¾

- æšä¸¾æ˜¯æ•°é‡å›ºå®šçš„å¸¸é‡å€¼ï¼Œé€šè¿‡ `enum` å…³é”®å­—å£°æ˜

  ```dart
  enum Color { red, green, blue }
  ```

- æšä¸¾çš„ `values` å¸¸é‡ï¼Œå¯ä»¥è·å–æ‰€æœ‰æšä¸¾å€¼åˆ—è¡¨

  ```dart
  List<Color> colors = Color.values;
  ```

- å¯ä»¥é€šè¿‡ `index` è·å–å€¼çš„ç´¢å¼•

  ```dart
  assert(Color.green.index == 1)
  ```

ä»£ç ç¤ºä¾‹ï¼š

```dart
enum Color { red, green, blue }

void main(List<String> args) {
  // é€šè¿‡ index è¿”å›æ²¡å±…ä¸­å…·ä½“å¸¸é‡çš„å€¼
  print(Color.green.index);

  // é€šè¿‡ values è¿”å›å¸¸é‡åˆ—è¡¨
  print(Color.values);
  List<Color> colors = Color.values;
  print(colors);

  // é€šè¿‡ä¸‹æ ‡ï¼Œè®¿é—®åˆ—è¡¨ä¸­çš„å†…å®¹
  print(colors[0]);

  // é€šè¿‡forEachéå†åˆ—è¡¨çš„å†…å®¹
  colors.forEach((element) {
    print("value: $element, index: ${element.index}");
  });
}

```

# åº“ä¸ç”Ÿæ€

æ ¸å¿ƒåº“ï¼š@See https://dart.cn/libraries/

ä¸‰æ–¹åº“ï¼š@See https://pub-web.flutter-io.cn/
